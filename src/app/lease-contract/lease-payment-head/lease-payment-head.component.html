<div class="container">
    <div class="card">
        <h2> Lease Payment Head </h2>
 
        <div class="card-header"><button type="button" *ngIf="merged" class="btn btn-secondary btn-success" label="Merged plots"
            (click)="get_merged_plots()">Merged plots</button>
        
    </div>
        <div class="form-container">
            <!-- left column of the form -->

            <section>
                <div class="p-fluid">
                    <div class="field">
                        <label for="Lease_Payment_grace_Period">Lease Payment grace Period</label>
                        <input class="form-control" #Lease_Payment_grace_Period="ngModel"
                            id="Lease_Payment_grace_Period" type="number" required pInputText [disabled]="true"
                            [(ngModel)]="leaserPaymentHead.Lease_Payment_grace_Period"
                            [ngClass]="{ 'ng-dirty': (Lease_Payment_grace_Period.invalid && submitted) || (Lease_Payment_grace_Period.dirty && Lease_Payment_grace_Period.invalid) }" />
                        <small
                            *ngIf="(Lease_Payment_grace_Period.invalid && submitted) || (Lease_Payment_grace_Period.dirty && Lease_Payment_grace_Period.invalid)"
                            class="p-error">Lease Payment grace Period is required.</small>
                    </div>

                  
                    <div class="field">
                        <label for="Total_lease_amount_to_be_paid">Total lease amount to be paid</label>
                        <input class="form-control" #Total_lease_amount_to_be_paid="ngModel" [disabled]="true"
                            id="Total_lease_amount_to_be_paid" type="number" required pInputText
                            [(ngModel)]="leaserPaymentHead.Total_lease_amount_to_be_paid"
                            [ngClass]="{ 'ng-dirty': (Total_lease_amount_to_be_paid.invalid && submitted) || (Total_lease_amount_to_be_paid.dirty && Total_lease_amount_to_be_paid.invalid) }" />
                        <small
                            *ngIf="(Total_lease_amount_to_be_paid.invalid && submitted) || (Total_lease_amount_to_be_paid.dirty && Total_lease_amount_to_be_paid.invalid)"
                            class="p-error">Total lease amount to be paid is required.</small>
                    </div>


                    <div class="field">
                        <label for="Amount_of_the_annual_lease_payment">Amount of the annual lease payment</label>
                        <input class="form-control" #Amount_of_the_annual_lease_payment="ngModel" [disabled]="true"
                            id="Amount_of_the_annual_lease_payment" type="number" required pInputText
                            [(ngModel)]="leaserPaymentHead.Amount_of_the_annual_lease_payment"
                            [ngClass]="{ 'ng-dirty': (Amount_of_the_annual_lease_payment.invalid && submitted) || (Amount_of_the_annual_lease_payment.dirty && Amount_of_the_annual_lease_payment.invalid) }" />
                        <small
                            *ngIf="(Amount_of_the_annual_lease_payment.invalid && submitted) || (Amount_of_the_annual_lease_payment.dirty && Amount_of_the_annual_lease_payment.invalid)"
                            class="p-error">Amount of the annual lease payment is required.</small>
                    </div>


                    <div class="field">
                        <label for="Lease_period_in_Year">Lease period in Year</label>
                        <input class="form-control" #Lease_period_in_Year="ngModel" id="Lease_period_in_Year"
                            [disabled]="!leaserPaymentHead.Is_old" type="number" required pInputText
                            [(ngModel)]="leaserPaymentHead.Lease_period_in_Year"
                            [ngClass]="{ 'ng-dirty': (Lease_period_in_Year.invalid && submitted) || (Lease_period_in_Year.dirty && Lease_period_in_Year.invalid) }" />
                        <small
                            *ngIf="(Lease_period_in_Year.invalid && submitted) || (Lease_period_in_Year.dirty && Lease_period_in_Year.invalid)"
                            class="p-error">Lease period in Year is required.</small>
                    </div>

                    <div class="field">
                        <label for="Date_of_final_lease_payment">Date of final lease pyment</label>
                        <input class="form-control" #Date_of_final_lease_payment="ngModel" [disabled]="true"
                            id="Date_of_final_lease_payment" type="date" required pInputText
                            [(ngModel)]="leaserPaymentHead.Date_of_final_lease_payment"
                            [ngClass]="{ 'ng-dirty': (Date_of_final_lease_payment.invalid && submitted) || (Date_of_final_lease_payment.dirty && Date_of_final_lease_payment.invalid) }" />
                        <small
                            *ngIf="(Date_of_final_lease_payment.invalid && submitted) || (Date_of_final_lease_payment.dirty && Date_of_final_lease_payment.invalid)"
                            class="p-error">Date of final lease pyment is required.</small>
                    </div>
                    <div class="field">
                        <label for="Remaining_lease_Payment">Remaining lease Payment</label>
                        <input class="form-control" #Remaining_lease_Payment="ngModel" id="Remaining_lease_Payment"
                            type="number" required pInputText [(ngModel)]="leaserPaymentHead.Remaining_lease_Payment"
                            [disabled]="true"
                            [ngClass]="{ 'ng-dirty': (Remaining_lease_Payment.invalid && submitted) || (Remaining_lease_Payment.dirty && Remaining_lease_Payment.invalid) }" />
                        <small
                            *ngIf="(Remaining_lease_Payment.invalid && submitted) || (Remaining_lease_Payment.dirty && Remaining_lease_Payment.invalid)"
                            class="p-error">Remaining lease Payment is required.</small>
                    </div>
                    <div class="field">
                        <label for="ContractDate">Lease Contract start Date</label>
                        <div class="col-sm-8">
                          <input type="date" [disabled]="disable || disabledate"  class="form-control"
                            [(ngModel)]="leaserPaymentHead.Contract_date" name="ContractDate" id="ContractDate"
                            [placeholder]="'Contract Date'" #ContractDate="ngModel"
                            [ngClass]="{ 'is-invalid': ContractDate.invalid }" required>
                        </div>
                      </div>
                </div>
            </section>
            <!-- right column of the form -->
            <section>

                <div class="p-fluid">


                    <div class="field">
                        <label for="Customer_Type">Customer Type</label>
                        <input class="form-control" #Customer_Type="ngModel" id="Customer_Type" type="text" required
                            pInputText [(ngModel)]="leaserPaymentHead.Customer_Type" [disabled]="true"
                            [ngClass]="{ 'ng-dirty': (Customer_Type.invalid && submitted) || (Customer_Type.dirty && Customer_Type.invalid) }" />
                        <small
                            *ngIf="(Customer_Type.invalid && submitted) || (Customer_Type.dirty && Customer_Type.invalid)"
                            class="p-error">Customer Type is required.</small>
                    </div>
                    <div class="field">
                        <label for="Transfer_type">Transfer type</label>
                        <input class="form-control" #Transfer_type="ngModel" id="Transfer_type" type="text" required
                            pInputText [(ngModel)]="leaserPaymentHead.Transfer_type" [disabled]="true"
                            [ngClass]="{ 'ng-dirty': (Transfer_type.invalid && submitted) || (Transfer_type.dirty && Transfer_type.invalid) }" />
                        <small
                            *ngIf="(Transfer_type.invalid && submitted) || (Transfer_type.dirty && Transfer_type.invalid)"
                            class="p-error">Transfer type is required.</small>
                    </div>

                    <div class="field">
                        <label for="Proporty_Use">Proporty Use</label>
                        <input class="form-control" #Proporty_Use="ngModel" id="Proporty_Use" type="text" required
                            pInputText [(ngModel)]="leaserPaymentHead.Proporty_Use" [disabled]="true"
                            [ngClass]="{ 'ng-dirty': (Proporty_Use.invalid && submitted) || (Proporty_Use.dirty && Proporty_Use.invalid) }" />
                        <small
                            *ngIf="(Proporty_Use.invalid && submitted) || (Proporty_Use.dirty && Proporty_Use.invalid)"
                            class="p-error">Proporty Use is required.</small>
                    </div>


                    <div class="field">
                        <label for="Lease_Period_end_date">Lease Period end date</label>
                        <input class="form-control" #Lease_Period_end_date="ngModel" id="Lease_Period_end_date"
                            type="date" required pInputText [(ngModel)]="leaserPaymentHead.Lease_Period_end_date"
                            [disabled]="true"
                            [ngClass]="{ 'ng-dirty': (Lease_Period_end_date.invalid && submitted) || (Lease_Period_end_date.dirty && Lease_Period_end_date.invalid) }" />
                        <small
                            *ngIf="(Lease_Period_end_date.invalid && submitted) || (Lease_Period_end_date.dirty && Lease_Period_end_date.invalid)"
                            class="p-error">Lease Period end date is required.</small>
                    </div>
                    <div class="field">
                        <label for="Lease_Payment_Year">Lease Payment Year</label>
                        <input  
                            class="form-control" 
                            #Lease_Payment_Year="ngModel" 
                            id="Lease_Payment_Year" 
                            type="number"
                            required 
                            pInputText 
                            [readonly]="!(leaserPaymentHead.Is_old || !edityear)"
                            [(ngModel)]="leaserPaymentHead.Lease_Payment_Year" 
                        />
                    </div>
                    <div class="field">
                        <label for="Is_Active">Is Active</label>
                        <input class="form-control" #Is_Active="ngModel" id="Is_Active" type="text" required pInputText
                            [disabled]="true" [(ngModel)]="leaserPaymentHead.Is_Active"
                            [ngClass]="{ 'ng-dirty': (Is_Active.invalid && submitted) || (Is_Active.dirty && Is_Active.invalid) }" />
                        <small *ngIf="(Is_Active.invalid && submitted) || (Is_Active.dirty && Is_Active.invalid)"
                            class="p-error">Is
                            Active is required.</small>
                    </div>
                    <div class="field">
                        <label for="isold">Is Old</label>
                        <input 
                            id="isold" 
                            type="checkbox" 
                            [(ngModel)]="leaserPaymentHead.Is_old" 
                        />
                    </div>
                    <div class="field" *ngIf="leaserPaymentHead.Is_old">
                        <label for="Old_Lease_Amount">Old Total lease amount</label>
                        <input 
                            class="form-control" 
                            #Old_Lease_Amount="ngModel" 
                            id="Old_Lease_Amount" 
                            type="number"
                            required 
                            pInputText 
                            [(ngModel)]="leaserPaymentHead.Old_Lease_Amount"
                            [ngClass]="{ 'ng-dirty': (Old_Lease_Amount.invalid && submitted) || (Old_Lease_Amount.dirty && Old_Lease_Amount.invalid) }" 
                        />
                        <small
                            *ngIf="(Old_Lease_Amount.invalid && submitted) || (Old_Lease_Amount.dirty && Old_Lease_Amount.invalid)"
                            class="p-error">Old Lease Amount is required.</small>
                    </div>
                    <div class="field"  *ngIf="leaserPaymentHead.Is_old">
                        <label for="isinterfree">Is Interest Free</label>
                        <input 
                            id="isinterfree" 
                            type="checkbox" 
                            [(ngModel)]="leaserPaymentHead.is_inter_free" 
                        />
                    </div>
                    
                </div>
              
            </section>
        </div>
        <div class="card-footer"><button type="button" [disabled]="!(leaserPaymentHead.Contract_date || !disable)" class="btn btn-secondary btn-success" label="Update"
                (click)="updateLeasPaymentHeadData()">Update</button>
            
        </div>
        <!-- <p>edityear: {{ edityear }}</p>
<p>leaserPaymentHead.Is_old: {{ leaserPaymentHead.Is_old }}</p> -->
    </div>
    <br>
</div>
<p-dialog [(visible)]="showmeged_plots" [responsive]="true"
  [style]="{'minHeight':'10%','height':'800px','minWidth':'10%','width':'80%' }" [maximizable]="true"
  [baseZIndex]="10000">
  <p-table [value]="proposeList" [paginator]="true" [rows]="5">
    <ng-template pTemplate="header">
      <tr>
        <th translate>Plot Id</th>
        <th translate>contract_date</th>
        <th translate>total_Plot_Size</th>
        <th translate>remaining_lease_payment</th>
        <th translate>lease_period_in_Year</th>
        <th translate>lease_Payment_Year</th>
        <th translate>date_of_final_lease_payment</th>
        <th translate>lease_Period_end_date</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-propose>
      <tr class="some-class" tabindex="1"
        [class.uistatehighlight]="rowData === highlighted">

        <!-- <td>{{Plot.Plot_ID}} </td> -->
        <!-- <td>
          <select class="form-control" disabled [(ngModel)]="Plot.Plot_Status" name="Statuss" id="Statuss">
            <option disabled translate>select</option>
            <option *ngFor="let Status of serviceService.PlotStutusLook" [value]="Status.Plot_Status_ID">
              {{Status.Name}}
            </option>
          </select>
        </td> -->
        <td>{{propose.parcel_ID}}</td>
        <td>{{propose.contract_date}}</td>
        <td>{{propose.total_Plot_Size}}</td>
        <td>{{propose.remaining_lease_payment}}</td>
        <td>{{propose.lease_period_in_Year}}</td>
        <td>{{propose.lease_Payment_Year}}</td>
        <td>{{propose.date_of_final_lease_payment}}</td>
        <td>{{propose.lease_Period_end_date}}</td>
        <!-- <td>
          <button type="button" class="btn btn-primary" (click)="SelectPLot(Plot);serachplotExists=false"
            translate>select</button>
        </td> -->
      </tr>
    </ng-template>
  </p-table>

  <p-footer>
    <!-- *ngIf="toogleSpin" -->
    <p-progressSpinner [style]="{width: '50px', height: '50px'}" strokeWidth="8"></p-progressSpinner>
    <button type="button" class="btn btn-danger" (click)="showmeged_plots=false" translate>close
    </button>

  </p-footer>


</p-dialog>