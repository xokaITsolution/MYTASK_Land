<div class="mt-3">


<div class="col-md-12 row">
  <div class="col-md-6">
    <p-table [value]="BaseTable" [paginator]="true" [rows]="5">
      <ng-template pTemplate="header"><tr>
          <th scope="col" translate>Title Deed No</th>
          <th scope="col" translate>Registration Date</th>
          <th scope="col" translate>Branch</th>
          <th scope="col"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-Base let-rowData>
        <tr (click)='highlighted = rowData;SelectBase(Base)' class="some-class" tabindex="1"  [class.ui-state-highlight]="rowData === highlighted">
       
          <td>{{Base.Title_Deed_No}}</td>
          <td>{{Base.Registration_Date}}</td>
          <td>
            <select disabled class="form-control" [disabled]="disable" [(ngModel)]="Base.SDP_ID" name="SubCity"
                    id="SubCity">
              <option disabled translate>select</option>
              <option *ngFor="let SubCity of serviceComponent.ServiceDeliveryUnitLookUP;"
                      [value]="SubCity.organization_code">{{SubCity.name_en}}
              </option>
            </select>
          </td>

          <td>
            <button type="button" class="btn btn-primary" (click)="SelectBase(Base)" translate>select</button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
 

  <div class="col-md-6">
    <div *ngIf="loadingPreDoc">
      <p-progressSpinner [style]="{width: '50px', height: '50px'}" strokeWidth="4">
      </p-progressSpinner>
    </div>
  <div  *ngIf="CertificateVersion">
    <div>

      <p-table [value]="CertificateVersion" [paginator]="true" [rows]="3">
        <ng-template pTemplate="header"><tr>
            <th scope="col" translate>Transfer ID</th>
            <th scope="col" translate>Version ID</th>
            <th scope="col" translate>Title Deed No</th>
            <th scope="col"></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-version let-rowData>
          <tr (click)='highlighted = rowData;Selectversion(version)' class="some-class" tabindex="1"  [class.ui-state-highlight]="rowData === highlighted">
         
            <td>{{version.ownership_ID}}</td>
            <td>{{version.version_ID}}</td>
            <td>{{version.title_Deed_No}}</td>
            <td>
              <button type="button" class="btn btn-primary" (click)="Selectversion(version)" translate>select</button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    </div>
  </div>

</div>



    <div class="mt-3" *ngIf="certltrview">
      <p-table [value]="cerlettrformList" [paginator]="true" [rows]="3">
        <ng-template pTemplate="header">
          <tr>
            <th scope="col" translate>Document no</th>
            <th scope="col" translate>Title deed no</th>
            <th scope="col" translate>Registration Date</th>
            <th scope="col">
              <button type="button" class="btn btn-primary" (click)="addcerltter()"   [disabled]="disable_new" translate>Add New</button>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-cerltter2 let-rowData>
          <tr (click)='highlighted = rowData;selectcerltter(cerltter2)' class="some-class" tabindex="1"  [class.ui-state-highlight]="rowData === highlighted">
         
            <td>{{cerltter2.Document_Number}}</td>
            <td>{{cerltter2.Title_Deed_No}}</td>
            <td>{{cerltter2.Regstration_Date}}</td>
            <td>
              <button type="button" class="btn btn-primary" (click)="selectcerltter(cerltter2)"  *ngIf="disable" translate>select</button>
              <button type="button" class="btn btn-primary" (click)="selectcerltter(cerltter2)"  *ngIf="!disable" translate>Edit</button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>



  <form class="form-row" #cerlettrform="ngForm" *ngIf="cerlettrform">
    <div class="col-md-6">
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Document No</label>
      <div class="col-sm-8">
      <input class="form-control" [disabled]="disable"   name="DocumentNo" id="DocumentNo" [(ngModel)]="cerltter.Document_Number" [placeholder]="'Document No' | translate"
      
      #DocumentNo="ngModel" [ngClass]="{ 'is-invalid': DocumentNo.invalid }" required>
    </div></div>
    <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Shelf Column</label>
      <div class="col-sm-8">
      <input class="form-control"  [disabled]="disable"   name="ShelfColumn" id="ShelfColumn" [(ngModel)]="cerltter.Shelf_Column" [placeholder]="'Shelf Column' | translate">
    </div></div>
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Shelf No</label>      <div class="col-sm-8">
      <input class="form-control" [disabled]="disable"   name="ShelfNo" id="ShelfNo" [(ngModel)]="cerltter.Shelf_NO" [placeholder]="'Shelf No' | translate">
    </div></div>
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>File Room No</label>      <div class="col-sm-8">
      <input class="form-control"   [disabled]="disable"  name="FileRoomNo" id="FileRoomNo" [(ngModel)]="cerltter.Room" [placeholder]="'File Room No' | translate">
    </div></div>
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Shelf Row</label>      <div class="col-sm-8">
      <input class="form-control" [disabled]="disable"   name="ShelfRow" id="ShelfRow" [(ngModel)]="cerltter.Shelf_Raw" [placeholder]="'Shelf Row' | translate">
    </div></div>  </div> <div class="col-md-6">
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Block/Floor</label>      <div class="col-sm-8">
      <input class="form-control"  [disabled]="disable"  name="Block/Floor" id="Block/Floor" [(ngModel)]="cerltter.Block_Floor" [placeholder]="'Block/Floor' | translate">
    </div></div>
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Site</label>      <div class="col-sm-8">
      <input class="form-control" [disabled]="disable"   name="Site" id="Site" [(ngModel)]="cerltter.Site" [placeholder]="'Site' | translate">
    </div></div>
    <!--  <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Date Created</label>
      <input type="date" class="form-control"  name="Block/Floor" id="Date_Created" [(ngModel)]="cerltter.Created_Date" [placeholder]="Date Created">
    </div>-->
    <div class="form-group row col-12"  *ngIf="language !== 'amharic'">
      <label  class="col-sm-4 col-form-label" translate>Regstration Date</label>      <div class="col-sm-8">
      <input type="date" class="form-control"  [disabled]="disable"  name="Regstration_Date" id="Regstration_Date" [(ngModel)]="cerltter.Regstration_Date" [placeholder]="'Regstration Date' | translate">
    </div>  </div>
    <div  class="form-group row col-12"  *ngIf="language === 'amharic'">
      <label  class="col-sm-4 col-form-label" translate>Regstration Date</label>      <div class="col-sm-8">
      <input type="text" class="form-control" readonly [disabled]="disable"  name="Regstration_Date" id="Regstration_Date" [(ngModel)]="cerltter.Regstration_Date" [placeholder]="'Regstration Date' | translate" appDatepickerEthiopian
      (dateEmitter)="selectedDateTime($event,1)">
    </div></div>
      <div class="form-group row col-12">
      <label  class="col-sm-4 col-form-label" translate>Title Deed No</label>      <div class="col-sm-8">
      <input type="text" disabled class="form-control" [disabled]="disable"   name="Title_Deed_No" id="Title_Deed_No " [(ngModel)]="cerltter.Title_Deed_No " [placeholder]="'Title Deed No' | translate">
    </div></div>
    <div class=" col-sm-7 pull-right" *ngIf="!isnew">
      <button *ngIf="!disable"  type="button" class="btn btn-primary" (click)="save()"translate>Update</button>
    </div>
    <div class=" col-sm-7 pull-right" *ngIf="isnew">
      <button *ngIf="!disable"  type="button" class="btn btn-primary" (click)="add()" [disabled]="!cerlettrform.valid"  translate>Save</button>
    </div></div>
  </form>

  <div class="m-3" *ngIf="disable_new">

    <button class="m-3 btn btn-primary" type="button" (click)="isLetterPrintingConfirmation=true" translate>Show Letter Printing Confirmation</button>

    <button class="m-3 btn btn-primary" type="button" (click)="isCertifcatePrintforConfirmation=true" translate>Show Certifcate Print for Confirmation</button>
  
  </div>
  <!--
  <tabset #staticTabs  *ngIf="certltrview">
    <tab heading="Letter Printing Confirmation">
      <div class="mt-3">
        <iframe  class="holds-the-iframe" height="2500px" width="100%" [src]="LetterReportPath" ></iframe>
      </div>
    </tab>
    <tab heading="Certifcate Print for Confirmation">
      <div class="mt-3">
        <iframe  class="holds-the-iframe" height="2500px" width="100%" [src]="certReportPath" ></iframe>
      </div>
    </tab>
  </tabset>
-->
</div>



<!-- <ngx-smart-modal #Letter identifier="Letter" class="nsm-dialog" >
  <div class="modal-header">
    <h4 class="modal-title pull-left" translate>Letter Printing Confirmation</h4>
  </div>
  <div class="modal-body">
    <div class="mt-3">
      <iframe  class="holds-the-iframe" height="1500px" width="100%" [src]="LetterReportPath" ></iframe>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="closeModal('Letter')">Close</button>
  </div>
</ngx-smart-modal>



<ngx-smart-modal #cert identifier="cert">
  <div class="modal-header">
    <h4 class="modal-title pull-left" translate>Certifcate Print for Confirmation</h4>
  </div>
  <div class="modal-body">
    <div class="mt-3">
      <iframe  class="holds-the-iframe" height="1000px" width="1000px" [src]="certReportPath" ></iframe>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="closeModal('cert')">Close</button>
  </div>
</ngx-smart-modal> -->
<p-dialog header=" Letter Printing Confirmation" [(visible)]="isLetterPrintingConfirmation" [responsive]="true" 
[width]="1400" [minY]="70"
[maximizable]="true"
[contentStyle]="{'overflow-y': 'auto', 
               'overflow-x': 'hidden', 
               'max-height': '80vh',
               'min-height':'250px'}">
                           
<div class="modal-body">
  <iframe class="ng-template" width="100%" height="500px" [src]="LetterReportPath"></iframe>
</div>
    <div class=" float-right">
      <p-button icon="pi pi-check" (click)="isLetterPrintingConfirmation=false;" label="Close" styleClass="p-button-text"></p-button>
    </div>
    </p-dialog>
    <p-dialog header="Certifcate Print for Confirmation" [(visible)]="isCertifcatePrintforConfirmation" [responsive]="true" 
    [width]="1400" [minY]="70"
    [maximizable]="true"  
    [contentStyle]="{'overflow-y': 'auto', 
                   'overflow-x': 'hidden', 
                   'max-height': '80vh',
                   'min-height':'250px'}">


<div class="modal-body">
  <iframe class="ng-template" width="100%" height="500px" [src]="certReportPath"></iframe>
</div>
    <div class=" float-right">
      <p-button icon="pi pi-check" (click)="isCertifcatePrintforConfirmation=false;" label="Close" styleClass="p-button-text"></p-button>
    </div>
    </p-dialog>
